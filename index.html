
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Waste Dashboard</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* Custom Styles */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fade-in 0.3s ease-out forwards; }
        
        @keyframes pulse-red {
            0%, 100% { background-color: #ef4444; }
            50% { background-color: #f87171; }
        }
        .animate-pulse-red { animation: pulse-red 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        
        /* Bin Liquid Animation */
        .liquid-fill { transition: height 1s ease-in-out, background-color 0.5s ease; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 h-screen overflow-hidden flex">

    <!-- Sidebar -->
    <div class="h-full w-20 bg-slate-900 hidden md:flex flex-col items-center py-8 z-50 shadow-xl">
        <div class="w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center mb-8 shadow-lg shadow-green-500/30">
            <i data-lucide="leaf" class="text-white w-6 h-6"></i>
        </div>
        <nav class="flex flex-col gap-6 w-full px-2">
            <button class="p-3 bg-white/10 rounded-xl text-white"><i data-lucide="layout-dashboard" class="w-6 h-6"></i></button>
            <button class="p-3 text-slate-500 hover:text-white hover:bg-white/5 rounded-xl transition-colors"><i data-lucide="activity" class="w-6 h-6"></i></button>
            <button class="p-3 text-slate-500 hover:text-white hover:bg-white/5 rounded-xl transition-colors"><i data-lucide="bar-chart-3" class="w-6 h-6"></i></button>
            <div class="mt-auto mb-4 p-3 relative text-slate-500 hover:text-white cursor-pointer">
                <i data-lucide="bell" class="w-6 h-6"></i>
                <span id="nav-alert-dot" class="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full hidden"></span>
            </div>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="flex-1 overflow-y-auto h-full p-6 md:p-8">
        
        <!-- Header -->
        <header class="flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4">
            <div>
                <h1 class="text-2xl font-bold text-slate-900">Waste Management Dashboard</h1>
                <p class="text-slate-500 text-sm">Real-time segregation data from Sector 7</p>
            </div>
            <div class="flex items-center gap-4">
                <div class="bg-white px-4 py-2 rounded-lg shadow-sm border border-slate-200 flex items-center gap-2">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    <span class="text-sm font-medium text-slate-600">System Online</span>
                </div>
                <div class="text-right hidden sm:block">
                    <div id="clock-time" class="text-lg font-bold text-slate-700">--:--</div>
                    <div id="clock-date" class="text-xs text-slate-400">--/--/----</div>
                </div>
            </div>
        </header>

        <!-- Top Stats Row -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- Stat 1 -->
            <div class="bg-white rounded-xl p-6 shadow-sm border border-slate-100 flex items-start justify-between">
                <div>
                    <p class="text-slate-500 text-sm font-medium mb-1">Total Waste Collected</p>
                    <h3 class="text-2xl font-bold text-slate-800"><span id="val-total">0</span> <span class="text-sm font-normal text-slate-400">kg</span></h3>
                    <p class="text-xs font-medium mt-2 flex items-center text-green-500">+12% from last hour</p>
                </div>
                <div class="p-3 rounded-lg bg-blue-500"><i data-lucide="trash-2" class="w-6 h-6 text-white"></i></div>
            </div>
            <!-- Stat 2 -->
            <div class="bg-white rounded-xl p-6 shadow-sm border border-slate-100 flex items-start justify-between">
                <div>
                    <p class="text-slate-500 text-sm font-medium mb-1">Segregation Accuracy</p>
                    <h3 class="text-2xl font-bold text-slate-800"><span id="val-accuracy">0</span> <span class="text-sm font-normal text-slate-400">%</span></h3>
                    <p class="text-xs font-medium mt-2 flex items-center text-green-500">+2.5% from last hour</p>
                </div>
                <div class="p-3 rounded-lg bg-green-500"><i data-lucide="check-circle" class="w-6 h-6 text-white"></i></div>
            </div>
            <!-- Stat 3 -->
            <div class="bg-white rounded-xl p-6 shadow-sm border border-slate-100 flex items-start justify-between">
                <div>
                    <p class="text-slate-500 text-sm font-medium mb-1">Recyclables Recovered</p>
                    <h3 class="text-2xl font-bold text-slate-800"><span id="val-recovered">0</span> <span class="text-sm font-normal text-slate-400">kg</span></h3>
                    <p class="text-xs font-medium mt-2 flex items-center text-green-500">+5% from last hour</p>
                </div>
                <div class="p-3 rounded-lg bg-teal-500"><i data-lucide="recycle" class="w-6 h-6 text-white"></i></div>
            </div>
            <!-- Stat 4 -->
            <div class="bg-white rounded-xl p-6 shadow-sm border border-slate-100 flex items-start justify-between">
                <div>
                    <p class="text-slate-500 text-sm font-medium mb-1">Carbon Offset</p>
                    <h3 class="text-2xl font-bold text-slate-800"><span id="val-carbon">0</span> <span class="text-sm font-normal text-slate-400">kg</span></h3>
                    <p class="text-xs font-medium mt-2 flex items-center text-green-500">+8% from last hour</p>
                </div>
                <div class="p-3 rounded-lg bg-indigo-500"><i data-lucide="wind" class="w-6 h-6 text-white"></i></div>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 pb-8">
            
            <!-- Left Column: Bins -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Bins Container -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-lg font-bold text-slate-800 flex items-center gap-2">
                            <i data-lucide="activity" class="w-5 h-5 text-slate-400"></i> Live Bin Status
                        </h2>
                    </div>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
                        <!-- Organic Bin -->
                        <div class="bg-white rounded-xl p-6 shadow-sm border border-slate-100 flex flex-col items-center relative group">
                            <div id="status-organic" class="absolute top-4 right-4 w-3 h-3 rounded-full bg-green-400"></div>
                            <div class="p-4 rounded-full mb-4 bg-green-500 bg-opacity-10 text-green-500"><i data-lucide="leaf" class="w-8 h-8"></i></div>
                            <h3 class="font-bold text-slate-700 mb-1">Organic</h3>
                            <p class="text-xs text-slate-400 mb-6">500kg Capacity</p>
                            <div class="w-full h-40 bg-slate-100 rounded-lg relative overflow-hidden border border-slate-200">
                                <div class="absolute inset-0 z-10 opacity-20 flex flex-col justify-between py-2 px-4 pointer-events-none">
                                    <div class="border-b border-slate-400 w-full h-full"></div>
                                    <div class="border-b border-slate-400 w-full h-full"></div>
                                </div>
                                <div id="fill-organic" class="liquid-fill absolute bottom-0 left-0 right-0 bg-green-500" style="height: 45%">
                                    <div class="absolute top-0 left-0 w-full h-2 bg-white opacity-30"></div>
                                </div>
                                <div class="absolute inset-0 z-20 flex items-center justify-center">
                                    <span id="text-organic" class="text-2xl font-bold text-slate-800 bg-white/80 px-3 py-1 rounded-md backdrop-blur-sm shadow-sm">45%</span>
                                </div>
                            </div>
                            <button onclick="emptyBin('organic')" class="mt-6 w-full py-2 px-4 bg-slate-50 hover:bg-slate-100 text-slate-600 rounded-lg text-sm font-medium transition-colors border border-slate-200 flex items-center justify-center gap-2">
                                <i data-lucide="refresh-cw" class="w-4 h-4"></i> Empty Bin
                            </button>
                        </div>

                        <!-- Recyclable Bin -->
                        <div class="bg-white rounded-xl p-6 shadow-sm border border-slate-100 flex flex-col items-center relative group">
                            <div id="status-recyclable" class="absolute top-4 right-4 w-3 h-3 rounded-full bg-green-400"></div>
                            <div class="p-4 rounded-full mb-4 bg-blue-500 bg-opacity-10 text-blue-500"><i data-lucide="recycle" class="w-8 h-8"></i></div>
                            <h3 class="font-bold text-slate-700 mb-1">Recyclable</h3>
                            <p class="text-xs text-slate-400 mb-6">400kg Capacity</p>
                            <div class="w-full h-40 bg-slate-100 rounded-lg relative overflow-hidden border border-slate-200">
                                <div class="absolute inset-0 z-10 opacity-20 flex flex-col justify-between py-2 px-4 pointer-events-none">
                                    <div class="border-b border-slate-400 w-full h-full"></div>
                                    <div class="border-b border-slate-400 w-full h-full"></div>
                                </div>
                                <div id="fill-recyclable" class="liquid-fill absolute bottom-0 left-0 right-0 bg-blue-500" style="height: 30%">
                                    <div class="absolute top-0 left-0 w-full h-2 bg-white opacity-30"></div>
                                </div>
                                <div class="absolute inset-0 z-20 flex items-center justify-center">
                                    <span id="text-recyclable" class="text-2xl font-bold text-slate-800 bg-white/80 px-3 py-1 rounded-md backdrop-blur-sm shadow-sm">30%</span>
                                </div>
                            </div>
                            <button onclick="emptyBin('recyclable')" class="mt-6 w-full py-2 px-4 bg-slate-50 hover:bg-slate-100 text-slate-600 rounded-lg text-sm font-medium transition-colors border border-slate-200 flex items-center justify-center gap-2">
                                <i data-lucide="refresh-cw" class="w-4 h-4"></i> Empty Bin
                            </button>
                        </div>

                        <!-- Hazardous Bin -->
                        <div class="bg-white rounded-xl p-6 shadow-sm border border-slate-100 flex flex-col items-center relative group">
                            <div id="status-hazardous" class="absolute top-4 right-4 w-3 h-3 rounded-full bg-green-400"></div>
                            <div class="p-4 rounded-full mb-4 bg-red-500 bg-opacity-10 text-red-500"><i data-lucide="alert-triangle" class="w-8 h-8"></i></div>
                            <h3 class="font-bold text-slate-700 mb-1">Hazardous</h3>
                            <p class="text-xs text-slate-400 mb-6">100kg Capacity</p>
                            <div class="w-full h-40 bg-slate-100 rounded-lg relative overflow-hidden border border-slate-200">
                                <div class="absolute inset-0 z-10 opacity-20 flex flex-col justify-between py-2 px-4 pointer-events-none">
                                    <div class="border-b border-slate-400 w-full h-full"></div>
                                    <div class="border-b border-slate-400 w-full h-full"></div>
                                </div>
                                <div id="fill-hazardous" class="liquid-fill absolute bottom-0 left-0 right-0 bg-red-500" style="height: 10%">
                                    <div class="absolute top-0 left-0 w-full h-2 bg-white opacity-30"></div>
                                </div>
                                <div class="absolute inset-0 z-20 flex items-center justify-center">
                                    <span id="text-hazardous" class="text-2xl font-bold text-slate-800 bg-white/80 px-3 py-1 rounded-md backdrop-blur-sm shadow-sm">10%</span>
                                </div>
                            </div>
                            <button onclick="emptyBin('hazardous')" class="mt-6 w-full py-2 px-4 bg-slate-50 hover:bg-slate-100 text-slate-600 rounded-lg text-sm font-medium transition-colors border border-slate-200 flex items-center justify-center gap-2">
                                <i data-lucide="refresh-cw" class="w-4 h-4"></i> Empty Bin
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Historical Trend Chart -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <h2 class="text-lg font-bold text-slate-800 mb-6 flex items-center gap-2">
                        <i data-lucide="bar-chart-3" class="w-5 h-5 text-slate-400"></i> Inflow Rate (Real-time)
                    </h2>
                    <div id="trend-chart-container" class="h-48 w-full relative">
                        <!-- SVG Injected via JS -->
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="space-y-8">
                <!-- Composition Chart -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-100 flex flex-col items-center">
                    <h2 class="text-lg font-bold text-slate-800 mb-6 w-full">Composition</h2>
                    <div id="donut-chart-container" class="relative w-48 h-48">
                        <!-- SVG injected via JS -->
                    </div>
                    <div class="flex gap-4 mt-6">
                        <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-green-500"></div><span class="text-xs font-medium text-slate-600">Organic</span></div>
                        <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-blue-500"></div><span class="text-xs font-medium text-slate-600">Recycle</span></div>
                        <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-red-500"></div><span class="text-xs font-medium text-slate-600">Hazard</span></div>
                    </div>
                </div>

                <!-- Alert Log -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-100 h-96 flex flex-col">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-bold text-slate-800">System Alerts</h2>
                        <span id="alert-badge" class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-full">0 New</span>
                    </div>
                    
                    <div id="alerts-list" class="flex-1 overflow-y-auto pr-2 space-y-3 custom-scrollbar">
                        <div class="text-center text-slate-400 text-sm mt-10">No active alerts</div>
                    </div>
                    <button onclick="clearAlerts()" class="w-full mt-4 text-xs text-slate-400 hover:text-slate-600 font-medium border-t pt-3">
                        Clear All Notifications
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Logic Script -->
    <script>
        // --- State ---
        let time = new Date();
        let wasteData = { organic: 120.5, recyclable: 85.2, hazardous: 12.1 };
        let binLevels = { organic: 45, recyclable: 30, hazardous: 10 };
        let trendHistory = [
            { time: '10:00', value: 20 },
            { time: '10:15', value: 25 },
            { time: '10:30', value: 22 },
            { time: '10:45', value: 30 }
        ];
        let alerts = [];
        let segregationAccuracy = 94;

        // --- Core Logic ---

        function init() {
            lucide.createIcons();
            updateDashboard();
            // Start simulation loop (every 2 seconds)
            setInterval(simulationLoop, 2000);
        }

        function simulationLoop() {
            // 1. Update Time
            time = new Date();

            // 2. Simulate Random Waste Inflow
            const organicInc = Math.random() > 0.6 ? Math.random() * 2 : 0;
            const recyclableInc = Math.random() > 0.6 ? Math.random() * 1.5 : 0;
            const hazardousInc = Math.random() > 0.9 ? Math.random() * 0.5 : 0;

            wasteData.organic += organicInc;
            wasteData.recyclable += recyclableInc;
            wasteData.hazardous += hazardousInc;

            // 3. Simulate Bin Filling
            let prevLevels = {...binLevels};
            binLevels.organic = Math.min(100, binLevels.organic + (organicInc * 0.8));
            binLevels.recyclable = Math.min(100, binLevels.recyclable + (recyclableInc * 0.9));
            binLevels.hazardous = Math.min(100, binLevels.hazardous + (hazardousInc * 2));

            // Check alerts
            checkThreshold('organic', binLevels.organic, prevLevels.organic);
            checkThreshold('recyclable', binLevels.recyclable, prevLevels.recyclable);
            checkThreshold('hazardous', binLevels.hazardous, prevLevels.hazardous);

            // 4. Update Trend History occasionally
            if (Math.random() > 0.7) {
                const timeString = `${time.getHours()}:${time.getMinutes().toString().padStart(2, '0')}`;
                const totalInflow = organicInc + recyclableInc + hazardousInc;
                trendHistory.push({ time: timeString, value: totalInflow * 10 });
                if (trendHistory.length > 10) trendHistory.shift();
            }

            // 5. Fluctuate Accuracy
            const accChange = (Math.random() - 0.5) * 2;
            segregationAccuracy = Math.min(100, Math.max(80, segregationAccuracy + accChange));

            updateDashboard();
        }

        function checkThreshold(type, current, prev) {
            if (current >= 90 && prev < 90) {
                addAlert(`${type.charAt(0).toUpperCase() + type.slice(1)} bin is CRITICAL (${Math.floor(current)}%)`, 'critical');
            }
        }

        function addAlert(message, type) {
            const id = Date.now();
            const timeStr = new Date().toLocaleTimeString();
            alerts.unshift({ id, message, type, time: timeStr });
            alerts = alerts.slice(0, 10); // Keep max 10
            renderAlerts();
        }

        function emptyBin(type) {
            binLevels[type] = 0;
            addAlert(`${type.charAt(0).toUpperCase() + type.slice(1)} bin emptied successfully.`, 'success');
            updateDashboard();
        }

        function clearAlerts() {
            alerts = [];
            renderAlerts();
        }

        // --- DOM Update Functions ---

        function updateDashboard() {
            // Update Text Stats
            document.getElementById('clock-time').textContent = time.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            document.getElementById('clock-date').textContent = time.toLocaleDateString();

            const totalWaste = wasteData.organic + wasteData.recyclable + wasteData.hazardous;
            const carbonOffset = (wasteData.recyclable * 2.5) + (wasteData.organic * 0.5);

            document.getElementById('val-total').textContent = totalWaste.toFixed(1);
            document.getElementById('val-accuracy').textContent = segregationAccuracy.toFixed(1);
            document.getElementById('val-recovered').textContent = wasteData.recyclable.toFixed(1);
            document.getElementById('val-carbon').textContent = carbonOffset.toFixed(1);

            // Update Bins
            updateBinUI('organic', binLevels.organic, 'bg-green-500', 'bg-green-400');
            updateBinUI('recyclable', binLevels.recyclable, 'bg-blue-500', 'bg-blue-400');
            updateBinUI('hazardous', binLevels.hazardous, 'bg-red-500', 'bg-red-400');

            // Render Charts
            renderCompositionChart();
            renderTrendChart();
        }

        function updateBinUI(type, level, baseColorClass, warnColorClass) {
            const isCritical = level >= 90;
            const isWarning = level >= 75 && level < 90;
            
            const fillEl = document.getElementById(`fill-${type}`);
            const textEl = document.getElementById(`text-${type}`);
            const statusEl = document.getElementById(`status-${type}`);

            // Update height
            fillEl.style.height = `${level}%`;
            textEl.textContent = `${Math.floor(level)}%`;

            // Update colors based on state
            fillEl.className = `liquid-fill absolute bottom-0 left-0 right-0 ${isCritical ? 'bg-red-500' : isWarning ? 'bg-amber-400' : baseColorClass}`;
            
            // Status Dot
            statusEl.className = `absolute top-4 right-4 w-3 h-3 rounded-full ${isCritical ? 'bg-red-500 animate-pulse-red' : isWarning ? 'bg-amber-400' : 'bg-green-400'}`;
        }

        function renderAlerts() {
            const container = document.getElementById('alerts-list');
            const badge = document.getElementById('alert-badge');
            const navDot = document.getElementById('nav-alert-dot');
            
            badge.textContent = `${alerts.length} New`;
            navDot.classList.toggle('hidden', alerts.length === 0);

            if (alerts.length === 0) {
                container.innerHTML = '<div class="text-center text-slate-400 text-sm mt-10">No active alerts</div>';
                return;
            }

            container.innerHTML = alerts.map(alert => `
                <div class="p-3 rounded-lg border-l-4 ${alert.type === 'critical' ? 'bg-red-50 border-red-500' : 'bg-green-50 border-green-500'} animate-fade-in">
                    <div class="flex justify-between items-start">
                        <h4 class="text-sm font-semibold ${alert.type === 'critical' ? 'text-red-700' : 'text-green-700'}">
                            ${alert.type === 'critical' ? 'Critical Alert' : 'Success'}
                        </h4>
                        <span class="text-[10px] text-slate-400">${alert.time}</span>
                    </div>
                    <p class="text-xs text-slate-600 mt-1">${alert.message}</p>
                </div>
            `).join('');
        }

        function renderCompositionChart() {
            const data = [
                { value: wasteData.organic, color: '#22c55e' },
                { value: wasteData.recyclable, color: '#3b82f6' },
                { value: wasteData.hazardous, color: '#ef4444' }
            ];
            
            const total = data.reduce((acc, curr) => acc + curr.value, 0) || 1;
            let accumulatedAngle = 0;
            
            let paths = data.map(item => {
                const angle = (item.value / total) * 360;
                // Avoid drawing if 0 to prevent NaN errors
                if (angle <= 0) return ''; 

                const x1 = 50 + 40 * Math.cos((Math.PI * accumulatedAngle) / 180);
                const y1 = 50 + 40 * Math.sin((Math.PI * accumulatedAngle) / 180);
                const x2 = 50 + 40 * Math.cos((Math.PI * (accumulatedAngle + angle)) / 180);
                const y2 = 50 + 40 * Math.sin((Math.PI * (accumulatedAngle + angle)) / 180);
                
                const largeArcFlag = angle > 180 ? 1 : 0;
                const pathData = `M 50 50 L ${x1} ${y1} A 40 40 0 ${largeArcFlag} 1 ${x2} ${y2} Z`;
                accumulatedAngle += angle;
                return `<path d="${pathData}" fill="${item.color}" class="hover:opacity-80 transition-opacity stroke-white stroke-2" />`;
            }).join('');

            const svg = `
                <svg viewBox="0 0 100 100" class="transform -rotate-90 w-full h-full">
                    ${paths}
                    <circle cx="50" cy="50" r="25" fill="white" />
                </svg>
                <div class="absolute inset-0 flex items-center justify-center flex-col pointer-events-none">
                    <span class="text-xs text-slate-400 font-medium">TOTAL</span>
                    <span class="text-xl font-bold text-slate-800">${total.toFixed(1)}kg</span>
                </div>
            `;
            document.getElementById('donut-chart-container').innerHTML = svg;
        }

        function renderTrendChart() {
            if (trendHistory.length < 2) return;
            
            const maxVal = Math.max(...trendHistory.map(d => d.value)) * 1.2 || 10;
            const points = trendHistory.map((d, i) => {
                const x = (i / (trendHistory.length - 1)) * 100;
                const y = 100 - (d.value / maxVal) * 100;
                return `${x},${y}`;
            }).join(' ');
            
            const dots = trendHistory.map((d, i) => {
                const x = (i / (trendHistory.length - 1)) * 100;
                const y = 100 - (d.value / maxVal) * 100;
                return `<circle cx="${x}" cy="${y}" r="1.5" fill="white" stroke="#3b82f6" stroke-width="1" />`;
            }).join('');

            const svg = `
                <svg viewBox="0 0 100 100" preserveAspectRatio="none" class="w-full h-full overflow-visible">
                    <line x1="0" y1="0" x2="100" y2="0" stroke="#f1f5f9" stroke-width="0.5" />
                    <line x1="0" y1="25" x2="100" y2="25" stroke="#f1f5f9" stroke-width="0.5" />
                    <line x1="0" y1="50" x2="100" y2="50" stroke="#f1f5f9" stroke-width="0.5" />
                    <line x1="0" y1="75" x2="100" y2="75" stroke="#f1f5f9" stroke-width="0.5" />
                    <line x1="0" y1="100" x2="100" y2="100" stroke="#f1f5f9" stroke-width="0.5" />
                    
                    <polygon points="0,100 ${points} 100,100" fill="rgba(59, 130, 246, 0.1)" />
                    <polyline points="${points}" fill="none" stroke="#3b82f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    ${dots}
                </svg>
                <div class="flex justify-between mt-2 text-[10px] text-slate-400 font-medium">
                    <span>${trendHistory[0].time}</span>
                    <span>${trendHistory[trendHistory.length - 1].time}</span>
                </div>
            `;
            document.getElementById('trend-chart-container').innerHTML = svg;
        }

        // Initialize App
        window.addEventListener('load', init);

    </script>
</body>
</html>